\documentclass[12pt,a4paper,french]{article}

\usepackage[T1]{fontenc}
\usepackage[latin9]{inputenc}
\usepackage{fullpage}
\usepackage[french]{babel} 
\usepackage[official]{eurosym}
\usepackage{txfonts}
\usepackage{graphicx}
\usepackage{lastpage}
\usepackage{fancyhdr}
\usepackage{titlesec}
\usepackage{color}
\usepackage{setspace}
\usepackage[nottoc, notlof, notlot]{tocbibind}
\usepackage{hyperref}

% Création de la subsubsubsection %
\titleclass{\subsubsubsection}{straight}[\subsection]
\newcounter{subsubsubsection}
\renewcommand\thesubsubsubsection{\thesubsubsection.\arabic{subsubsubsection}}
\renewcommand\theparagraph{\thesubsubsubsection.\arabic{paragraph}}
\titleformat{\subsubsubsection}
  {\normalfont\normalsize\bfseries}{\thesubsubsubsection}{1em}{}
\titlespacing*{\subsubsubsection}
{0pt}{3.25ex plus 1ex minus .2ex}{1.5ex plus .2ex}
\makeatletter
\renewcommand\paragraph{\@startsection{paragraph}{5}{\z@}%
  {3.25ex \@plus1ex \@minus.2ex}%
  {-1em}%
  {\normalfont\normalsize\bfseries}}
\renewcommand\subparagraph{\@startsection{subparagraph}{6}{\parindent}%
  {3.25ex \@plus1ex \@minus .2ex}%
  {-1em}%
  {\normalfont\normalsize\bfseries}}
\def\toclevel@subsubsubsection{4}
\def\toclevel@paragraph{5}
\def\toclevel@paragraph{6}
\def\l@subsubsubsection{\@dottedtocline{4}{7em}{4em}}
\def\l@paragraph{\@dottedtocline{5}{10em}{5em}}
\def\l@subparagraph{\@dottedtocline{6}{14em}{6em}}
\makeatother
\setcounter{secnumdepth}{4}
\setcounter{tocdepth}{4}


\begin{document}

\section*{Cahier des charges}
\subsection*{Mise en contexte du problème}
Ce projet a pour but la réalisation d'une application de production d'un emploi du temps, et ainsi de faciliter le travail de M. Maeso. En effet, chaque année, il doit créer manuellement l'intégralité des emplois du temps de l'école, en tenant compte de toutes les contraintes de disponibilités des professeurs, des salles, des élèves, etc. L'application pourra lui faire gagner un gain non-négligeable dans son travail.\\

Mais ce problème peut être généralisé à toutes les planifications horaires d'employés, comme dans les écoles, les hôpitaux et toutes autres entreprises ayant un roulement de personnel à organiser.\\

La planification sous contraintes est la discipline des mathématiques appliquées consistant à ordonner diverses séquences ou évènements dans un espace-temps limité. Ces planifications impliquent un grand nombre de contraintes, qu'elles soient liées aux disponibilités de personnes, d'emplacements ou à tous autres problèmes divers et variés.\\

La réalisation d'une planification est à la fois longue et périlleuse. Il est très difficile de concilier l'ensemble des contraintes qui accompagnent cet ordonnancement et de pouvoir organiser cela de manière optimale. La mise en place d'un calendrier est souvent faite à la main ou de manière approximative avec d'autres applications.\\

L'objectif de ce projet est donc de réaliser une application, permettant de générer une planification tenant compte de toutes les contraintes que l'on aura indiquées au préalable. Dans un premier temps, nous nous contenterons de générer un emploi du temps propre à l'école, quitte à élargir notre champ d'action si nous en avons le temps.

\subsection*{Langage utilisé}
Nous allons programmer ce projet en C++. En effet, celui-ci est un langage objet et nous aidera à mieux organiser notre code grâce aux classes, au polymorphisme, et l'héritage. De plus, il s'agit du langage que nous avons le plus pratiqué durant notre cursus.
Nous aurions également pu utilisé le Java mais celui-ci est moins rapide et un langage rapide est primordial pour notre problème. De plus, le manque de pratique de ce langage de notre part pourrait être problématique pour la suite.

\subsection*{Réduction du problème}
Le problème étant très conséquent et très complexe, nous avons décidé dans un premier temps de réduire le nombre de facteur à prendre en compte. C'est pourquoi, nous nous occupons pas des salles et que nous générons l'emploi du temps que sur une semaine. Au fur et à mesure que notre solution se consolidera, on rajoutera de nouveaux paramètres pour le rapprocher petit à petit du cas réel.

\subsection*{Interface graphique}
Pour nous concentrer uniquement sur la résolution du problème, nous avons décidé de ne pas faire l'interface graphique, faute de temps. Celle-ci pourra être donné comme sujet de projet à des groupes de M1.

\subsection*{Les données d'entrée du problème}
Les données d'entrée seront stockées dans des fichiers externes afin d'éviter à l'utilisateur de les rentrer à chaque fois qu'il exécute le programme. De plus, il pourra modifier les données directement dans le fichier sans être obligé de lancer son programme à chaque fois. Cela peut s'avérer plus efficace que l'utilisation répétée de la fonction de modification.

De plus, on pourrait également imaginer que l'utilisateur possède plusieurs versions de ces fichiers, ce qui lui éviterait de tout resaisir à chaque changement.

\subsubsection*{Les professeurs}
Les professeurs vont être définis par:
\begin{itemize}
\item un nom
\item des disponibilités
\item la liste des cours qu'ils peuvent enseigner
\end{itemize}

\subsubsection*{Les classes}
Les classes vont être définies par:
\begin{itemize}
\item un nom
\item un nombre d'élève
\item la liste des cours qu'elle va suivre
\end{itemize}

\subsubsection*{Les cours}
Les cours vont être définis par:
\begin{itemize}
\item un nom
\item un nombre d'heure de cours
\item un type de salle dans laquelle il doit être donné (un type de cours)
\end{itemize}

\subsubsection*{Les salles}
Les salles sont définies par:
\begin{itemize}
\item un nom
\item un nombre de place
\item un type à savoir, une salle de cours, une salle de TP spécifique
\end{itemize}

\subsection*{Les données en sortie du problème}
En sortie, nous allons avoir les emplois du temps de tous les professeurs, de toutes les classes et de toutes les salles. Ces emplois du temps seront également stockés dans des fichiers externes.

\newpage
\section*{Les acteurs}		
Il existe deux principaux types d'acteur pour notre logiciel:

\subsection*{Premier acteur : Saisie des données}
Le rôle du premier acteur est de saisir toutes les données relatives aux professeurs, salles, et  élèves, et tous les paramètres nécessaires à une première simulation de l'emploi du temps.
		
\subsection*{Second acteur : Maintenance de l'emploi du temps}
Etablir un emploi du temps est une bonne chose, mais il faut  également pouvoir le modifier au cours de l'année si des évènements imprévus doivent être rajoutés.
Le rôle du deuxième acteur est donc de gérer la maintenance de l'emploi du temps au fur et à mesure que l'année avance. Il doit pouvoir rajouter des évènements dans l'emploi du temps des professeurs et/ou des élèves.

Dans le cas spécifique de notre école, ces deux acteurs sont confondus.

\newpage
\section*{Cas d'utilisation}
\subsection*{Génération de l'emploi du temps}	
\begin{figure}[! ht ]
	\centering
	\begin{minipage}[t]{14 cm}
		\centering
			\fbox{
				\includegraphics[width=140mm, height=140mm]{CasUtilisation1.png}
			}
		\caption {Diagramme cas d'utilisation, génération de l'emploi du temps}
	\end{minipage}
\end{figure}
			
\subsubsection*{Objectif}
L'objectif est de créer un emploi du temps à partir de données brutes entrées par l'utilisateur.

\subsubsection*{Acteurs}
L'acteur est celui qui est chargé de la saisie des données.
		
\subsubsection*{Données échangées et description des enchaînements}	
L'acteur en question entre les différentes données propres aux professeurs, classes, salles, et matières. Pour chaque élément, il devra remplir des critères bien spécifiques:

\begin{itemize}
\item Pour chaque professeur, il doit entrer son nom, les matières que celui-ci enseigne et ses disponibilités dans la semaine. 
\item Pour chaque matière, il doit entrer le nom de la matière, le programme qui devra être dispensé au cours de l'année (matières et nombre d'heures).
\item Pour chaque classe, il doit préciser le nom de la classe, la promotion à laquelle elle appartient et le nombre d'élève que contient cette classe.
\item Pour chaque salle, il doit entrer leur contenance et leur type (salle de TP info, salle de cours, etc...)
\end{itemize}
					
Une fois que toutes les données ont été entré, le logiciel génère automatiquement tous les emplois du temps de l'école. 
		
\newpage
\subsection*{Maintenance de l'emploi du temps}	
\begin{figure}[! ht ]
	\centering
	\begin{minipage}[t]{14 cm}
		\centering
		\fbox{
			\includegraphics[width=140mm, height=80mm]{CasUtilisation2.png}
		}
		\caption {Diagramme cas d'utilisation, maintenance de l'emploi du temps}
	\end{minipage}
\end{figure}
			
\subsubsection*{Objectif}
Pour une raison ou pour une autre, l'utilisateur peut être amené à rajouter un évènement dans l'emploi du temps. Le logiciel doit donc le permettre en tenant  compte des évènements déjà placés et des contraintes que cela implique, sans avoir à générer à nouveau tout l'emploi du temps. 
				
\subsubsection*{Acteurs}
Le seul acteur à intervenir dans ce cas est celui chargé de la maintenance.
			
\subsubsection*{Données échangées}
Pour placer un cours dans l'emploi du temps, le programme devra consulter les disponibilités de chaque élément:

\begin{itemize}
\item Les disponibilités des professeurs ou des intervenants
\item Les disponibilités des élèves
\item Les disponibilités d'une salle convenant à l'évènement, et dont la capacité est suffisante pour accueillir tous les élèves.
\end{itemize}
				
\subsubsection*{Description des enchaînements}		
\subsubsubsection*{Pré-condition}
Lorsque l'utilisateur voudra rajouter un évènement, il lui faudra connaître les disponibilités de chacune des entités concernées. Il devra également savoir quelles classes sont concernées par l'évènement, si elles doivent recevoir l'évènement par classe ou par promo, etc...

\subsubsubsection*{Séquence}
L'utilisateur entre les disponibilités de chacun dans le programme, et celui-ci va chercher les différents créneaux possibles pour placer le cours. L'utilisateur aura alors deux possibilités : soit il laisse le programme placer automatiquement le cours, soit il demandera au programme d'afficher la liste des créneaux disponibles afin de placer manuellement le cours. Celui-ci n'aura qu'à choisir le créneau qui lui semble le plus adapté.

\newpage
\section*{Organisation des données}
Nous avons défini la semaine sur 24 créneaux de 2 heures chacun. Avec 2 créneaux le matin et 2 l'après-midi du lundi au samedi matin.

\subsection*{Les professeurs}
Les disponibilités du professeurs vont être représenté par un mot binaire de 24 bits, un bit par créneau. 1 représentant une disponibilité et 0 une indisponibilité.
Chacune de ces disponibilités vont être liés à une semaine.

Pour une semaine donnée, lorsque nous ajoutons un cours à un professeur, ses disponibilités changent et cela aura pour conséquence de modifier le mot binaire en faisant passer un bit à 0.

Chaque professeur aura une liste de cours qu'il sera susceptible de dispenser.

\subsection*{Les classes}
Chaque classe va avoir une liste de semaines associée. Celles-ci vont être définies par un numéro définissant leur ordre dans l'année, et 24 créneaux assignés que l'on devra remplir avec les cours planifiés à la classe. On définit le nombre créneaux à 24 car il peut y avoir des cours tous les jours sauf le dimanche et qu'il y a 4 créneaux disponibles par jour (en effet, certaines classes de M2 ont cours le samedi après-midi).

Chaque classe aura également un nombre d'élève pour que celle-ci puisse suivre les cours dans les salles appropriées.

Chaque classe aura une liste de cours qu'elle devra obligatoirement suivre.

\subsection*{Les matières}
Chaque matière possède un nom, une promotion à laquelle elle doit être dispensée et un nombre d'heures à enseigner. D'ailleurs, si une matière est présente pour plusieurs promotions, elle possédera deux noms, un pour chacune des promotions (ex: Algèbre_B1, Algèbre_B2). De la même manière, on distinguera les cours en classe entière, des cours en demi-groupes et des TPs.

Elle possédera également un type qui sera nécessaire pour savoir dans quelle salle elle doit être enseignée (ex: un TP ne peut pas être fait dans un amphithéâtre).

\subsection*{Les salles}
Chaque salle possède une contenance maximum afin éviter qu'une classe entière ait cours en salle d'informatique. Elle possède également un type qui définie si c'est une salle de TPs ou un amphithéâtre par exemple. Afin d'optimiser le programme, on pourra inclure dans quel bâtiment se trouve la salle car en effet, un professeur ne peut être de 8h30 à 10h30 à Ivry-sur-Seine et être de 10h30 à 12h30 à Montparnasse.

\subsection*{Les semaines}
Chaque professeur et classe ont des semaines qui leur sont assignées. En effet, l'emploi du temps est générer semaine par semaine. C'est-à-dire que le programme exécute le processus le traitement (décrit plus bas) pour la première semaine puis il relance le processus pour la deuxième semaine et ainsi de suite. Nous avons fait ce choix pour nous faciliter la tâche car si nous réussissons à faire l'emploi du temps d'une semaine, nous pourrons le faire pour deux ou trois, etc... Ainsi, les mots binaires sont données pour une seule semaine et pareillement pour le placement des créneaux.

Le problème qui se posera sur plusieurs semaines est qu'un cours peut-être à des créneaux différents d'une semaine à une autre (ex: le cours d'algèbre le lundi à 8h30 la première semaine et mardi 10h30 la semaine suivante). Il faudra donc trouver un moyen de placer un cours sur le même créneau sur plusieurs semaines consécutives sans dépasser le nombre d'heures à dispenser.

\subsection*{Les fichiers externes}
Les données saisies par l'utilisateur sont stockées dans des fichiers externes (des fichiers .txt sont amplement suffisant). Cela évite à l'utilisateur de resaisir à chaque fois toutes les données, car celle-ci étant très nombreuses, quand celui-ci lance le programme. Pour l'instant, il y a trois fichiers, un pour les professeurs, un pour les classes et un pour les matières. Un autre fichier pour les salles viendra ensuite quand nous déciderons d'inclure ce dernier.
Dans le fichier "professeurs.txt", chaque professeur saisi est inscrit sur une ligne du fichier et chacune de ses informations (nom, disponibilités, matières) est séparées par un "|". 

Pour l'ajout d'une professeur, on l'ajoute sur la premier ligne vide du fichier. Pour la modification et la supression, il faudra parcourir l'intégralité du fichier pour modifier ou supprimer le professeur en question.
Ce modèle est repris pour les classes, les matières et prochainement les salles.

\newpage
\section*{Méthode de résolution}

\subsection*{Saisie des données}
L'utilisateur (M. MAESO) devra saisir les données dans le programme. Ces données sont:
\begin{itemize}
\item Les professeurs (nom, disponibilités, matières)
\item Les classes (nom, promotions, nombre d'élèves)
\item Les matières (nom, heures, promotions)
\item Les salles (nom, type de salle, contenance maximum) 
\end{itemize}

Il aura le choix entre ajouter, modifier, supprimer chacun de ces paramètres. Il ne pourra ajouter un paramètre déjà entré précédemment (ex: ajoutez deux fois M.Herry dans le programme ne sera pas possible). Evidemment, il ne pourra modifier ou supprimer un paramètre inexistant.
Les paramètres sont inscrits dans un fichier externe et toutes les manipulations citées ci-dessus seront faites dans ce fichier. Ainsi, l'utilisateur pourra soit modifier le fichier depuis le programme ou directement en ouvrant le fichier.

Une fois que tous les paramètres entrés, il génèrera les emplois du temps. Ces emplois du temps seront également mis dans un fichier externe.

\subsection*{Pré-traitement}
Une fois les données entrées par l'utilisateur, nous effectuons un pré-traitement pour éviter des calculs inutiles qui n'aboutiront pas.
Nous comparons le nombre de cours qui doivent être donnés par matière sur une semaine toutes classes confondues, avec le nombre de créneaux disponibles pour l'ensemble des profs donnant cette matière.

\begin{itemize}
\item Si le nombre de créneaux total des professeurs est supérieur au nombre de créneaux du cours alors il n'y a pas de pré-traitement à effectuer pour ce cours.
\item Si le nombre de créneaux total des professeurs est égal au nombre de créneaux du cours alors on peut directement associer les classes aux créneaux du ou des professeurs
\item Si le nombre de créneaux total des professeurs est inférieur au nombre de créneaux du cours alors nous ne pouvons pas aboutir à une solution. Il faut donc ajouter des professeurs ou des créneaux.
\end{itemize}

\subsection*{Traitement}
Dans un premier temps, on trie les professeurs de manière croissante par rapport à leurs disponibilités. 
Ensuite, nous prenons le professeur ayant donc le moins de disponibilités. Nous sélectionnons une matière, celles-ci ne sont pas triées, et nous comparons les disponibilités du professeur à celles de la première classe ayant cette matière. Dès que nous trouvons un créneau disponible pour la classe et le professeur, on place la matière pour les deux entités et ont met à jour leurs mots binaires afin que ce créneau ne soit plus utilisé.
Nous faisons ensuite de même pour une autre matière. Une fois que toutes les matières ont été faites, on passe au professeur suivant.
Si une classe ou un professeur n'a pas pu se voir attribué toutes ces matières, nous signalons à l'utilisateur que le nombre de professeur est insuffisant.
Notre méthode de résolution est dite gloutonne, c'est-à-dire que l'on remplie dès que nous pouvons sans regarder s'il y a un meilleur créneau après.

Comme vous avez pu le remarquer, les salles n'apparaissent nulle part dans le traitement. En effet, nous avons décidé que, pour commencer et pour nous faciliter la tâche, nous allons générer les emplois du temps sans nous préoccupper des salles. Nous incluerons le paramètre des salles plus tard, quand notre algorithme sera plus solide.


\end{document}